<!DOCTYPE html>
<!-- deploy-v3-cache-fix -->
<html>

<head>
  <script>
    // Build Version: 4.4-nuclear-head
    // This script MUST run before any other script to prevent SW interference
    (async function() {
      const DEPLOY_TIME = "1736411700"; 
      const lastDeploy = localStorage.getItem('cm_deploy_v5');
      
      if (lastDeploy !== DEPLOY_TIME) {
        console.log('Nuking all caches and storage for new version...');
        if ('serviceWorker' in navigator) {
          const regs = await navigator.serviceWorker.getRegistrations();
          for (let r of regs) await r.unregister();
        }
        if ('caches' in window) {
          const keys = await caches.keys();
          for (let k of keys) await caches.delete(k);
        }
        const keysToClear = [];
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key && (key.includes('classmaster') || key.includes('supabase') || key.includes('sb-'))) {
            keysToClear.push(key);
          }
        }
        keysToClear.forEach(k => localStorage.removeItem(k));
        localStorage.setItem('cm_deploy_v5', DEPLOY_TIME);
        window.location.reload(true);
      }
    })();
  </script>
  <title>
    <%= productName %>
  </title>

  <meta charset="utf-8">
  <meta name="description" content="<%= productDescription %>">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="viewport"
    content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width<% if (ctx.mode.cordova || ctx.mode.capacitor) { %>, viewport-fit=cover<% } %>">

  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" href="/favicon.png">
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>

<body>
  <!-- quasar:entry-point -->
</body>

</html>